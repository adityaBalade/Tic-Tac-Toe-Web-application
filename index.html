<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic-Tac-Toe</title>
<style>
  body{
    background:#0a0a0a;
    color:#00ffff;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
    margin:0;
  }
  h1{
    color:#00ffff;
    text-shadow:0 0 20px #00ffff;
    margin-bottom:20px;
  }
  .controls{
    margin-bottom:15px;
  }
  select{
    padding:8px;
    font-size:16px;
    border-radius:8px;
    border:2px solid #00ffff;
    background:none;
    color:#00ffff;
    outline:none;
    margin-left:10px;
    cursor:pointer;
  }
  .board{
    display:grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap:10px;
  }
  .cell{
    width:100px;
    height:100px;
    background:#111;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:48px;
    cursor:pointer;
    border-radius:15px;
    box-shadow: 0 0 20px #00ffff;
    transition:0.3s;
  }
  .cell:hover{
    background:#0ff1;
    box-shadow: 0 0 30px #00ffff;
    transform: scale(1.1);
  }
  .winner{
    color:#ff00ff;
    text-shadow:0 0 30px #ff00ff;
  }
  button{
    margin-top:20px;
    padding:10px 20px;
    font-size:16px;
    border:2px solid #00ffff;
    border-radius:10px;
    background:none;
    color:#00ffff;
    cursor:pointer;
    transition:0.3s;
  }
  button:hover{
    background:#00ffff;
    color:#0a0a0a;
    box-shadow:0 0 25px #00ffff;
  }
  @media(max-width:480px){
    .board{grid-template-columns: repeat(3, 80px);grid-template-rows: repeat(3, 80px);gap:8px;}
    .cell{width:80px;height:80px;font-size:36px;}
  }
</style>
</head>
<body>
<h1>Tic-Tac-Toe</h1>
<div class="controls">
  Mode:
  <select id="mode">
    <option value="pvp">Player vs Player</option>
    <option value="pve">Player vs AI</option>
  </select>
  AI Difficulty:
  <select id="difficulty">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
  </select>
</div>
<div class="board" id="board">
  <div class="cell" data-index="0"></div>
  <div class="cell" data-index="1"></div>
  <div class="cell" data-index="2"></div>
  <div class="cell" data-index="3"></div>
  <div class="cell" data-index="4"></div>
  <div class="cell" data-index="5"></div>
  <div class="cell" data-index="6"></div>
  <div class="cell" data-index="7"></div>
  <div class="cell" data-index="8"></div>
</div>
<button id="reset">Reset Game</button>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const cells = document.querySelectorAll('.cell');
  const resetBtn = document.getElementById('reset');
  const modeSelect = document.getElementById('mode');
  const difficultySelect = document.getElementById('difficulty');
  let turn = 'X';
  let gameActive = true;
  let boardState = Array(9).fill('');

  const winningConditions = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];

  function checkWinner(){
    for(let condition of winningConditions){
      const [a,b,c] = condition;
      if(boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]){
        gameActive = false;
        cells[a].classList.add('winner');
        cells[b].classList.add('winner');
        cells[c].classList.add('winner');
        setTimeout(()=>alert(`${boardState[a]} Wins!`),100);
        return;
      }
    }
    if(!boardState.includes('')){
      gameActive = false;
      setTimeout(()=>alert(`It's a Draw!`),100);
    }
  }

  function playerMove(index){
    if(boardState[index]==='' && gameActive){
      boardState[index]=turn;
      cells[index].textContent=turn;
      checkWinner();
      if(modeSelect.value==='pve' && turn==='X' && gameActive){
        turn='O';
        setTimeout(aiMove,200);
      } else {
        turn = turn==='X'?'O':'X';
      }
    }
  }

  function aiMove(){
    let emptyIndices = boardState.map((v,i)=>v===''?i:null).filter(v=>v!==null);
    let aiIndex;
    const diff = difficultySelect.value;
    if(diff==='easy'){
      aiIndex = emptyIndices[Math.floor(Math.random()*emptyIndices.length)];
    } else if(diff==='medium'){
      aiIndex = findWinningMove('O') || findWinningMove('X') || emptyIndices[Math.floor(Math.random()*emptyIndices.length)];
    } else {
      aiIndex = minimax(boardState,'O').index;
    }
    boardState[aiIndex]='O';
    cells[aiIndex].textContent='O';
    turn='X';
    checkWinner();
  }

  function findWinningMove(player){
    for(let i=0;i<9;i++){
      if(boardState[i]===''){
        boardState[i]=player;
        if(isWinner(player)){ boardState[i]=''; return i; }
        boardState[i]='';
      }
    }
    return null;
  }

  function isWinner(player){
    return winningConditions.some(cond=>cond.every(idx=>boardState[idx]===player));
  }

  function minimax(newBoard,player){
    let availSpots = newBoard.map((v,i)=>v===''?i:null).filter(v=>v!==null);
    if(isWinner('X')) return {score:-10};
    if(isWinner('O')) return {score:10};
    if(availSpots.length===0) return {score:0};

    let moves=[];
    for(let i=0;i<availSpots.length;i++){
      let move={};
      move.index=availSpots[i];
      newBoard[availSpots[i]]=player;
      let result = minimax(newBoard,player==='O'?'X':'O');
      move.score=result.score;
      newBoard[availSpots[i]]='';
      moves.push(move);
    }
    let bestMove;
    if(player==='O'){
      let bestScore=-Infinity;
      moves.forEach(m=>{ if(m.score>bestScore){bestScore=m.score;bestMove=m;} });
    } else {
      let bestScore=Infinity;
      moves.forEach(m=>{ if(m.score<bestScore){bestScore=m.score;bestMove=m;} });
    }
    return bestMove;
  }

  cells.forEach(cell=>cell.addEventListener('click',()=>playerMove(cell.dataset.index)));

  resetBtn.addEventListener('click',()=>{
    boardState.fill('');
    cells.forEach(cell=>{
      cell.textContent='';
      cell.classList.remove('winner');
    });
    turn='X';
    gameActive=true;
  });
});
</script>
</body>
</html>